{% extends 'base/base.html' %}

{% load static %}

{% load movie_extras %}

{% block title %}INDEX{% endblock %}

<body>
{% block slider %}

    <!--Slider-->
    <section id="slide-show">
        <div id="slider" class="sl-slider-wrapper">
            <!--Slider Items-->
            <div class="sl-slider">
                <!--Slider Item1-->
                <div class="sl-slide item1" data-orientation="horizontal" data-slice1-rotation="-25"
                     data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">
                    <div class="sl-slide-inner">
                        <div class="container">
                            <img class="pull-right" src="{{ best_rated_movie.poster.url }}" alt=""/>
                            <h2>{{ best_rated_movie.title }}</h2>
                            <h3 class="gap">BEST RATED</h3>
                            <a class="btn btn-large btn-transparent"
                               href="{% url 'appMovie:movie-detail' best_rated_movie.slug %}">View More</a>
                        </div>
                    </div>
                </div>
                <!--/Slider Item1-->
                <!--Slider Item2-->
                <div class="sl-slide item2" data-orientation="vertical" data-slice1-rotation="10"
                     data-slice2-rotation="-15"
                     data-slice1-scale="1.5" data-slice2-scale="1.5">
                    <div class="sl-slide-inner">
                        <div class="container">
                            <img class="pull-right" src="{{ best_rated_movie2.poster.url }}" alt=""/>
                            <h2>{{ best_rated_movie2.title }}</h2>
                            <h3 class="gap">SECOND BEST RATED</h3>
                            <a class="btn btn-large btn-transparent"
                               href="{% url 'appMovie:movie-detail' best_rated_movie2.slug %}">View More</a>
                        </div>
                    </div>
                </div>
                <!--Slider Item2-->
                <!--Slider Item3-->
                <div class="sl-slide item3" data-orientation="horizontal" data-slice1-rotation="3"
                     data-slice2-rotation="3"
                     data-slice1-scale="2" data-slice2-scale="1">
                    <div class="sl-slide-inner">
                        <div class="container">
                            <img class="pull-right" src="{{ best_rated_movie3.poster.url }}" alt=""/>
                            <h2>{{ best_rated_movie3.title }}</h2>
                            <h3 class="gap">THIRD BEST RATED</h3>
                            <a class="btn btn-large btn-transparent"
                               href="{% url 'appMovie:movie-detail' best_rated_movie3.slug %}">View More</a>
                        </div>
                    </div>
                </div>
                <!--Slider Item3-->
            </div>
            <!--/Slider Items-->
            <!--Slider Next Prev button-->
            <nav id="nav-arrows" class="nav-arrows">
                <span class="nav-arrow-prev"><i class="icon-angle-left"></i></span>
                <span class="nav-arrow-next"><i class="icon-angle-right"></i></span>
            </nav>
            <!--/Slider Next Prev button-->
        </div>
        <!-- /slider-wrapper -->
    </section>
    <!--/Slider-->

{% endblock %}

{% block services %}

    <!--Services-->
    <section id="services">
        <div class="container">
            <div class="center gap">
                <h1>Recent movies</h1>
            </div>
            <div class="row-fluid">
                <ul class="gallery col-4">
                    <!--Item 1-->
                    {% for movie in movie_list %}
                        <li>
                            <div class="preview">
                                <img alt=" " src="{{ movie.poster.url }}"/>
                                <div class="overlay"></div>
                                <div class="links">
                                    {% if user.is_authenticated and user.is_staff %}
                                        <a data-toggle="modal" href="#modal-{{ movie.slug }}"><i
                                                class="icon-eye-open"></i></a>
                                        <a
                                                href="{% url 'appMovie:editmovie' movie.slug %}"><i
                                                class="icon-pencil"></i></a>
                                        <a
                                                href="{% url 'appMovie:deletemovie' movie.slug %}"><i
                                                class="icon-trash"></i></a>
                                    {% else %}
                                        <a style="margin-left: 50px;" data-toggle="modal"
                                           href="#modal-{{ movie.slug }}"><i class="icon-eye-open"></i></a>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="desc">
                                <a href="{% url 'appMovie:movie-detail' movie.slug %}">{{ movie.title }}</a>
                                <h5>Release date: {{ movie.release_date }}</h5>
                            </div>
                            <div id="modal-{{ movie.slug }}" class="modal hide fade">
                                <a class="close-modal" href="javascript:;" data-dismiss="modal" aria-hidden="true"><i
                                        class="icon-remove"></i></a>
                                <div class="modal-body">
                                    <h1 style="color: #000;" class="text-center">{{ movie.title }}</h1>
                                    <center>
                                        {% if movie.trailer_url == '' %}
                                            <img width="620" height="345" alt=" " src="{{ movie.poster.url }}"/>
                                        {% else %}
                                            <iframe width="620" height="345"
                                                    src="https://www.youtube.com/embed/{{ movie.trailer_url|url }}">
                                            </iframe>
                                        {% endif %}
                                        <br>
                                        <br>
                                        <table class="table table-dark table-striped table-hover" border="2">
                                            <thead>
                                            <td>Title</td>
                                            <td>Genre</td>
                                            <td>Language</td>
                                            <td>Country</td>
                                            <td>Release date</td>
                                            <td>Duration</td>
                                            <td>Trailer url</td>
                                            <td>Directors</td>
                                            <td>Actors</td>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>{{ movie.title }}</td>
                                                <td>{{ movie.genre }}</td>
                                                <td>{{ movie.original_language }}</td>
                                                <td>{{ movie.country }}</td>
                                                <td>{{ movie.release_date }}</td>
                                                <td>{{ movie.duration }} min</td>
                                                <td><a target="_blank"
                                                       href="{{ movie.trailer_url }}">{{ movie.trailer_url }}</a></td>
                                                <td>{% for director in movie.directors|data %}
                                                    * {{ director.name }}
                                                {% endfor %}</td>
                                                <td>{% for actor in movie.actors|data %}
                                                    * {{ actor.name }}
                                                {% endfor %}</td>
                                            </tr>

                                            </tbody>
                                        </table>
                                    </center>
                                </div>
                            </div>
                        </li>
                    {% endfor %}

                    <!--/Item 1-->

                </ul>
            </div>
        </div>
    </section>
    <!--/Services-->

{% endblock %}
</body>