{% extends 'base/base.html' %}

{% load static %}

{% load movie_extras %}

{% block title %}DETAIL{% endblock %}

<body>

{% block services %}

    <!--Services-->
    <section id="services">
        <div class="container">
            <div class="center gap">
                <h1>"{{ movie.title }}" details</h1>
                <p class="lead"></p>
            </div>
            <div class="row-fluid ">
                <h1>{{ movie.title }}</h1>
                <br>
                <center>
                    {% if movie.trailer_url == '' %}
                        <img width="620" height="345" alt=" " src="{{ movie.poster.url }}"/>
                    {% else %}
                        <iframe width="620" height="345"
                                src="https://www.youtube.com/embed/{{ movie.trailer_url|url }}">
                        </iframe>
                    {% endif %}
                </center>

                <br>
                <br>

                <h3>{{ movie.detail }}</h3>

                <br>
                <table class="table table-dark table-striped table-hover" border="2">
                    <thead>
                    <td>Title</td>
                    <td>Genre</td>
                    <td>Language</td>
                    <td>Country</td>
                    <td>Release date</td>
                    <td>Duration</td>
                    <td>Trailer url</td>
                    <td>Directors</td>
                    <td>Actors</td>
                    </thead>
                    <tbody>
                    <tr>
                        <td>{{ movie.title }}</td>
                        <td>{{ movie.genre }}</td>
                        <td>{{ movie.original_language }}</td>
                        <td>{{ movie.country }}</td>
                        <td>{{ movie.release_date }}</td>
                        <td>{{ movie.duration }} min</td>
                        <td><a target="_blank" href="{{ movie.trailer_url }}">{{ movie.trailer_url }}</a></td>
                        <td>{% for director in movie.directors|data %}
                            * {{ director.name }}
                        {% endfor %}</td>
                        <td>{% for actor in movie.actors|data %}
                            * {{ actor.name }}
                        {% endfor %}</td>
                    </tr>

                    </tbody>
                </table>
                <br>
                <div class="center gap">
                    {% if user.is_authenticated %}
                        <h1>Rate this movie</h1>
                        <form method="post" action="{% url 'appMovie:addmovierate' %}">
                            {% csrf_token %}
                            <label for="id_user">User:</label>
                            <select name="user" id="id_user">
                                <option value="{{ user.id }}" selected="">{{ user.username }}</option>
                            </select>

                            <label for="id_rate">Rate:</label>{{ form.rate }}<br>
                            <label for="id_comment">Comment</label>{{ form.comment }}
                            <label for="id_movie">Movie:</label>
                            <select name="movie" id="id_movie">
                                <option value="{{ movie.id }}" selected="">{{ movie.title }}</option>
                            </select><br><br>

                            <input class="btn btn-large btn-transparent" type="submit" value="Guardar"/>

                        </form>
                    {% endif %}
                </div>


            </div>
        </div>
    </section>
    <!--/Services-->
{% endblock %}
</body>